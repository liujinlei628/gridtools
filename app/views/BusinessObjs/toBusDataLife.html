#{extends 'main.html' /}
#{set title:'index.html' /}

<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins" id="_qunee">
            <div class="ibox-content" style="overflow: hidden;padding-bottom: 0;">
                <h3>${busAttrName} 全生命周期</h3>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins" id="_qunee">
            <div class="ibox-content" style="overflow: hidden;padding-bottom: 0;">
                <div class="search-form">
                    <form action="@{BusinessObjs.saveDataLife()}" id="dataLifeForm" class="form-horizontal">
                        <input type="hidden" name="busAttrName" id="busAttrName" value="${busAttrName}" >
                        <input type="hidden" name="busAttrCode" id="busAttrCode" value="${busAttrCode}" >
                    
                        <div class="form-group">
                            <label class="txt-al-mar-pad">起始业务：</label>
                            <div class="col-search-input">
                                <select name="start_node" id="start_node" class="form-control required" onchange="checkStartNode(this.value)" >
                                    <option value="">请选择</option>
                                    #{list items:list,as:'_data'}
                                        <option value="${_data.bus_content}" #{if _data.bus_content == tCfgDataLife.start_node}selected="selected"#{/if}>${_data.bus_content}</option>
                                    #{/list}
                                </select>
                            </div>
                            <label class="txt-al-mar-pad">终止业务：</label>
                            <div class="col-search-input">
                                <select name="end_node" id="end_node" class="form-control required" onchange="checkEndNode(this.value)">
                                    <option value="">请选择</option>
                                    #{list items:list,as:'_data'}
                                        <option value="${_data.bus_content}" #{if _data.bus_content == tCfgDataLife.end_node}selected="selected"#{/if}>${_data.bus_content}</option>
                                    #{/list}
                                </select>
                            </div>
                            <div class="input-group-btn">
                                <button class="btn btn btn-primary" type="button" onclick="butSub()" >确定</button>
                            </div>
                        </div>
                    </form>
                    <div class="page-box">
                        <button class="next-page-btn page-box-row">
                            <a class="next-page-btn-a" href="javascript:void(window.history.go(-1));" >返回</a>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- <div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins" id="_qunee">
            <div class="ibox-content" style="overflow: hidden;">
                <div id="crudListTable">
                    <table width="100%" class="table table-striped table-bordered table-hover tab tr th ">
                        <thead>
                            <tr>
                                <th width="30%">起始节点</th>
                                <th width="40%">流转及应用</th>
                                <th width="30%">终止节点</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td width="30%">
                                    <div>
                                        <table width="100%" id="startTab" class="table table-striped table-bordered table-hover tab tr th ">
                                            <tr><td>${tCfgDataLife.start_node}</td></tr>
                                        </table>
                                    </div>
                                </td>
                                <td width="40%">
                                    <div>
                                        <table width="100%" id="appTab" class="table table-striped table-bordered table-hover tab tr th ">
                                            #{list items:strList,as:'_str'}
                                                <tr><td>${_str}</td></tr>
                                            #{/list}
                                        </table>
                                    </div>
                                </td>
                                <td width="30%">
                                    <div>
                                        <table width="100%" id="endTab" class="table table-striped table-bordered table-hover tab tr th ">
                                            <tr><td>${tCfgDataLife.end_node}</td></tr>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="page-box">
                    <button class="next-page-btn page-box-row">
                        <a class="next-page-btn-a" href="javascript:void(window.history.go(-1));" >返回</a>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div> -->

#{set 'moreScripts'}
<script type="text/javascript" src="@{'/public/js/echarts.min.js'}"></script>
<script type="text/javascript" src="@{'/public/js/jquery-form.min.js'}"></script>
<script type="text/javascript" src="@{'/public/js/jquery.validate.min.js'}"></script>
<script type="text/javascript" src="@{'/public/js/plugins/jquery-ui/jquery-ui.min.js'}"></script>
<link href="@{'/public/js/plugins/jquery-ui/jquery-ui.min.css'}" rel="stylesheet">
<script type="text/javascript">

    function checkStartNode(startNode) {
        
        var start = startNode;
        var end = $("#end_node").val();
        if(end != ''){
            if(start == end){
                alert("起始业务与终止业务不能重复，请重新选择！");
                $("#start_node").val("");
            } 
        }
    }
    
    function checkEndNode(endNode) {
        
        var start = $("#start_node").val();
        var end = endNode;
        if(start != ''){
            if(start == end){
                alert("终止业务与起始业务不能重复，请重新选择！");
                $("#end_node").val("");
            } 
        }
    }
    
    function butSub(){
        
        var start = $("#start_node").val();
        var end = $("#end_node").val();
        
        if(start != '' && end != ''){
            $("#dataLifeForm").submit();
        } else {
            if(start == ''){
                alert("请选择起始业务！");
            } else {
                alert("请选择终止业务！");
            }
        }
    }
    
</script>

<script type="text/javascript">

$(function(){
    showHighLight(2, 2, 5);
});

</script>

<style type="text/css">

.col-xs-2 {
    width: 10%;
    padding-top: 5px;
}

.btn{
    padding: 5px;
}

.current-page-li {
    list-style-type:none;
}

.page-box-row{
    margin-top: 10px;
    margin-left: 20px;
    float: left;
}

.txt-al-mar-pad{
    float: left;
    margin-top: 5px;
    margin-left: 10px;
}

.col-search-input{
    width: 150px;
    float: left;
    margin-right: 10px;
}

.text_color {
    color:"#F30";
    font-weight: 600;
}


table tr th {
    text-align: center;
}

.page-box-row {
    margin-top: 10px;
    margin-left: 20px;
    margin-bottom: 10px;
    float: right;
}
</style>

#{/set}
