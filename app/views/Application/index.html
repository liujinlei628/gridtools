#{extends 'main.html' /}
#{set title:'Home' /}
*{<div class="row">}*
    *{<div class="col-lg-12">}*
        *{<div class="ibox float-e-margins">}*
            *{<div class="ibox-content text-center p-md">}*

                *{<h2>}*
                    *{<span class="text-navy">公司一体化业务体系</span>}*
                *{</h2>}*

            *{</div>}*
        *{</div>}*
    *{</div>}*
*{</div>}*
<div class="row">
    <div class="col-sm-12">
        <div id="main" style="height: 900px;"></div>
    </div>
</div>

#{set 'moreScripts'}
<script src="@{'/public/js/echarts.js'}" ></script>
<script src="@{'/public/js/echarts-gl.min.js'}" ></script>
<script type="text/javascript">
    var myChart = echarts.init(document.getElementById('main'));
    $.getJSON("@{controllers.Sky.search("")}", function(data) {
        option = {
            title: {
                text: "公司业务一体化体系",
                top: "top",
                left: "center"
            },
            tooltip: {
                show: true,
                formatter: function(e) {
                    return e.data.displayname;
                }
            },
            legend: {
                x: "bottom",
                bottom:"auto",
                data: data.categories.map(function (a) {
                    return a.name;
                }),
                tooltip: {
                    show: true
                },
            },
            toolbox: {
                show: true,
                feature: {
                    dataView: {
                        show: true,
                        readOnly: true
                    },
                    restore: {
                        show: true
                    },
                    saveAsImage: {
                        show: true
                    },
                    myTool1: {
                        show: true,
                        title: '版块浏览',
                        icon: 'path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891',
                        onclick: function (){
                            window.location.href="/Application/indexQunee";
                        }
                    }
                }
            },
            animationDuration: 1500,
            animationEasingUpdate: 'quinticInOut',
            series: [{
                type: 'graph',
                layout: 'force',

                force: {
                    //initLayout:'circular'
                    edgeLength: 50,
                    repulsion: 50,
                    gravity: 0.2
                },
                data: data.nodes,
                links: data.links,
                categories: data.categories,
                focusNodeAdjacency: true,
                roam: true,
                label: {
                    normal: {
                        show: true,
                        formatter: function(e) {
                            return e.data.name;
                        },
                        textStyle: {
                            color: '#333',
                            fontFamily: '微软雅黑',
                            fontSize: 10
                        }
                    }
                },
                lineStyle: {
                    normal: {
                        //color: 'target',
                        curveness: 0
                    }
                }
            }]
        };
        myChart.setOption(option)
    })
</script>
<script type="text/javascript">

$(function(){
     showHighLight(1, 1, 1);
});

</script>

#{/set}